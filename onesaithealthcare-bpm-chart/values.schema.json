{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "environment": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["dev", "prod"],
          "default": "dev",
          "description": "Selecciona el tipo de entorno (dev o prod)"
        }
      },
      "required": ["type"]
    },
    "domain": {
      "type": "object",
      "properties": {
        "protocol": {
          "type": "string",
          "enum": ["http", "https"],
          "description": "Protocolo del dominio (http o https)"
        },
        "host": {
          "type": "string",
          "description": "Introduce el host del dominio"
        },
        "istio": {
          "type": "boolean",
          "default": false,
          "description": "¿Istio habilitado?"
        }
      },
      "required": ["protocol", "host", "istio"]
    },
    "docker": {
      "type": "object",
      "properties": {
        "registry": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "default": "docksdtr.indra.es",
              "description": "Host del registro Docker"
            },
            "project": {
              "type": "string",
              "default": "multhn_cmhn20_2",
              "description": "Proyecto del registro Docker"
            }
          },
          "required": ["host", "project"]
        }
      },
      "required": ["registry"]
    },
    "bpm": {
      "type": "object",
      "properties": {
        "app": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "default": "ohbpm",
              "description": "Nombre de la aplicación BPM"
            },
            "gateway": {
              "type": "string",
              "default": "oh-modules-gateway",
              "description": "Gateway de la aplicación BPM"
            },
            "locale_default": {
              "type": "string",
              "default": "ES",
              "description": "Configuración regional predeterminada"
            },
            "host": {
              "type": "string",
              "default": "oh-modules.apps.lab.openshift.com",
              "description": "Host de la aplicación BPM"
            },
            "replicas": {
              "type": "integer",
              "default": 1,
              "description": "Número de réplicas para la aplicación BPM"
            },
            "cod_passive_cause_death": {
              "type": "integer",
              "default": 2,
              "description": "Código de causa pasiva de muerte"
            },
            "flag": {
              "type": "object",
              "properties": {
                "patient_merge": {
                  "type": "boolean",
                  "default": true,
                  "description": "¿Habilitar la fusión de pacientes?"
                },
                "audit_enable": {
                  "type": "boolean",
                  "default": false,
                  "description": "¿Habilitar auditoría?"
                },
                "disable_process_pasive_patient": {
                  "type": "boolean",
                  "default": false,
                  "description": "¿Deshabilitar el procesamiento de pacientes pasivos?"
                },
                "enable_profile_search": {
                  "type": "boolean",
                  "default": true,
                  "description": "¿Habilitar la búsqueda de perfiles?"
                },
                "enable_obs_generation": {
                  "type": "boolean",
                  "default": true,
                  "description": "¿Habilitar la generación de observaciones?"
                },
                "enable_kafka_replication": {
                  "type": "boolean",
                  "default": true,
                  "description": "¿Habilitar la replicación de Kafka?"
                },
                "enable_kpi_generation": {
                  "type": "boolean",
                  "default": true,
                  "description": "¿Habilitar la generación de KPIs?"
                }
              },
              "required": [
                "patient_merge",
                "audit_enable",
                "disable_process_pasive_patient",
                "enable_profile_search",
                "enable_obs_generation",
                "enable_kafka_replication",
                "enable_kpi_generation"
              ]
            },
            "log": {
              "type": "object",
              "properties": {
                "level": {
                  "type": "string",
                  "default": "WARN",
                  "description": "Nivel de log para la aplicación BPM"
                },
                "sql_level": {
                  "type": "string",
                  "default": "ERROR",
                  "description": "Nivel de log SQL para la aplicación BPM"
                }
              },
              "required": ["level", "sql_level"]
            }
          },
          "required": [
            "name",
            "gateway",
            "locale_default",
            "host",
            "replicas",
            "cod_passive_cause_death",
            "flag",
            "log"
          ]
        },
        "database": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["ORACLE", "MYSQL"],
              "default": "ORACLE",
              "description": "Tipo de base de datos (ORACLE o MYSQL)"
            },
            "max_pool_size": {
              "type": "integer",
              "default": 20,
              "description": "Tamaño máximo del pool de conexiones a la base de datos"
            },
            "driver": {
              "type": "string",
              "default": "oracle.jdbc.driver.OracleDriver",
              "description": "Driver JDBC para la base de datos"
            },
            "url": {
              "type": "string",
              "default": "jdbc:oracle:thin:@proyvalhnbd1-1.indra.es:1521:mymed",
              "description": "URL de conexión a la base de datos"
            },
            "user": {
              "type": "string",
              "default": "us_ohbpm",
              "description": "Usuario de la base de datos"
            },
            "pass": {
              "type": "string",
              "default": "us_ohbpm",
              "description": "Contraseña de la base de datos"
            },
            "min_idle": {
              "type": "integer",
              "default": 10,
              "description": "Número mínimo de conexiones activas en alta demanda"
            },
            "con_timeout": {
              "type": "integer",
              "default": 30000,
              "description": "Tiempo de espera para lanzar una excepción si no hay conexión (s)"
            },
            "idle_timeout": {
              "type": "integer",
              "default": 600000,
              "description": "Tiempo de espera de inactividad para cerrar una conexión (min)"
            },
            "max_lifetime": {
              "type": "integer",
              "default": 1800000,
              "description": "Tiempo máximo de vida de una conexión (ms)"
            },
            "val_timeout": {
              "type": "integer",
              "default": 5000,
              "description": "Tiempo de espera para validación de conexiones (ms)"
            },
            "leak_detection": {
              "type": "integer",
              "default": 15000,
              "description": "Tiempo para detección de fugas de conexiones (ms)"
            }
          },
          "required": [
            "type",
            "max_pool_size",
            "driver",
            "url",
            "user",
            "pass",
            "min_idle",
            "con_timeout",
            "idle_timeout",
            "max_lifetime",
            "val_timeout",
            "leak_detection"
          ]
        },
        "prm": {
          "type": "object",
          "properties": {
            "enable_notifications": {
              "type": "boolean",
              "default": true,
              "description": "¿Habilitar notificaciones?"
            },
            "organization_notifications": {
              "type": "string",
              "default": "SES",
              "description": "Organización para notificaciones"
            }
          },
          "required": ["enable_notifications", "organization_notifications"]
        },
        "version": {
          "type": "object",
          "properties": {
            "app": {
              "type": "string",
              "default": "4.9.0",
              "description": "Versión de la aplicación BPM"
            },
            "back_image_tag": {
              "type": "string",
              "default": "4.9.0",
              "description": "Etiqueta de la imagen del backend"
            },
            "front_image_tag": {
              "type": "string",
              "default": "4.9.0",
              "description": "Etiqueta de la imagen del frontend"
            },
            "smart_front_image_tag": {
              "type": "string",
              "default": "4.9.0",
              "description": "Etiqueta de la imagen del frontend inteligente"
            },
            "webcomponents_front_image_tag": {
              "type": "string",
              "default": "4.9.0",
              "description": "Etiqueta de la imagen de los webcomponents del frontend"
            },
            "designer_front_image_tag": {
              "type": "string",
              "default": "4.9.0",
              "description": "Etiqueta de la imagen del diseñador del frontend"
            },
            "prof_image_tag": {
              "type": "string",
              "default": "4.9.0",
              "description": "Etiqueta de la imagen del perfil"
            }
          },
          "required": [
            "app",
            "back_image_tag",
            "front_image_tag",
            "smart_front_image_tag",
            "webcomponents_front_image_tag",
            "designer_front_image_tag",
            "prof_image_tag"
          ]
        }
      },
      "required": ["app", "database", "prm", "version"]
    }
  },
  "required": ["environment", "domain", "docker", "bpm"]
}